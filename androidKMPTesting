plugins {
    id("com.cibc.build")
    alias(libs.plugins.androidLibrary)
    alias(libs.plugins.compose)
    alias(libs.plugins.composeCompiler)
}

cibc {
    compose = true
    packageName = "com.cibc.test007"
    moduleName = "Test807"
    koin = true
    preCompose = true
}

// Android Library Configuration
android {
    namespace = cibc.packageName
    compileSdk = 33 // Replace with your actual compileSdk version

    defaultConfig {
        minSdk = 21 // Replace with your actual minSdk version
    }
}

// Configure Kotlin Multiplatform
configureKotlinTargets()

// Configure Multiplatform Sources
configureMultiplatformSources()

// Dependencies
dependencies {
    // Compose Dependencies
    implementation(findLibrary("compose-ui-tooling-preview"))
    implementation(compose.runtime)
    implementation(compose.foundation)
    implementation(compose.material3)
    implementation(compose.ui)
    implementation(compose.materialIconsExtended)
    implementation(compose.components.resources)

    // PreCompose Dependency
    api(findLibrary("preCompose"))

    // Koin Dependencies
    implementation(findLibrary("koin-android"))
    implementation(findLibrary("koin-core"))
    implementation(findLibrary("koin-compose"))

    // Common Dependencies
    implementation(findLibrary("kotlinx-collections"))
    implementation(findLibrary("kotlinx-serialization"))
    implementation(findLibrary("kotlinx-coroutines"))
    implementation(findLibrary("kotlinx-datetime"))

    // Domain and Support Dependencies
    implementation(findLibrary("androidx-lifecycle-viewModel"))

    // Test Dependencies
    testImplementation(findLibrary("junit"))
    testImplementation(findLibrary("kotlin-test"))
    testImplementation(findLibrary("kotlinx-coroutines-test"))
    testImplementation(kotlin("test-annotations-common"))
    testImplementation(kotlin("test-common"))

    // Android Unit Test Dependencies
    val androidTest = sourceSets.getByName("androidUnitTest")
    androidTest.dependencies {
        implementation(findLibrary("mockk"))
        implementation(findLibrary("turbine"))
        implementation(findLibrary("androidx-core-test"))
    }

    // Project Dependencies
    implementation(projects.composeApp.features.test007)
    implementation(projects.modules.routing)
}
